<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    
    <!-- 1. 引入 A-Frame -->
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
    
    <!-- 2. 引入 MindAR 的 A-Frame adapter -->
    <script src="https://cdn.jsdelivr.net/npm/mind-ar@1.2.5/dist/mindar-image-aframe.prod.js"></script>
    
    <!-- 3. 【新增】引入 A-Frame Extras (用來處理動畫) -->
    <script src="https://cdn.jsdelivr.net/gh/c-frame/aframe-extras@7.2.0/dist/aframe-extras.min.js"></script>

    <title>MindAR Animated WebAR</title>
  </head>
  <body>
    <!-- MindAR 場景設定 -->
    <a-scene 
      mindar-image="imageTargetSrc: ./targets.mind;" 
      color-space="sRGB" 
      renderer="colorManagement: true, physicallyCorrectLights" 
      vr-mode-ui="enabled: false" 
      device-orientation-permission-ui="enabled: false">

      <a-assets>
        <!-- 載入模型 -->
        <a-asset-item id="avatarModel" src="./3d.glb"></a-asset-item>
      </a-assets>

      <a-camera position="0 0 0" look-controls="enabled: false"></a-camera>

      <!-- 追蹤目標 (Index 0) -->
      <a-entity mindar-image-target="targetIndex: 0">
        
        <!-- 
          顯示 3D 模型並設定動畫:
          animation-mixer 屬性詳解:
            clip: *       -> 播放所有偵測到的動畫片段 (也可以指定具體名稱，如 clip: Run)
            loop: repeat  -> 無限循環播放 (這是預設值)
            timeScale: 1  -> 播放速度 (1為正常，0.5為慢動作，2為快轉)
        -->
        <a-gltf-model 
            src="#avatarModel" 
            position="0 0 0" 
            scale="0.5 0.5 0.5" 
            rotation="0 0 0"
            animation-mixer="clip: *; loop: repeat; timeScale: 1"
        ></a-gltf-model>

      </a-entity>
    </a-scene>
  </body>
</html>